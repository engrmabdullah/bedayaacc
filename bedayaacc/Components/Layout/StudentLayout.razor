@inherits LayoutComponentBase
@inject NavigationManager Nav
@inject TranslationService TranslationService

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
            await TranslationService.EnsureInitAfterRenderAsync();
        StateHasChanged();
    }
    string Tr(string k) => TranslationService.Translate(k);
    private async Task SetAr() => await TranslationService.SetLanguageAsync("ar");
    private async Task SetEn() => await TranslationService.SetLanguageAsync("en");
}

<div class="dashboard student @(TranslationService.CurrentLanguage == "ar" ? "rtl" : "ltr")">
    <aside class="sidebar">
        <div class="brand">Student</div>
        <ul class="menu">
            <li><a href="/student">@Tr("Nav.Dashboard")</a></li>
            <li><a href="/student/my-courses">@Tr("Nav.MyCourses")</a></li>
            <li><a href="/student/progress">@Tr("Nav.Progress")</a></li>
            <li><a href="/student/certificates">@Tr("Nav.Certificates")</a></li>
            <li><a href="/student/messages">@Tr("Nav.Messages")</a></li>
            <li><a href="/logout">@Tr("Nav.Logout")</a></li>
        </ul>
        <div class="lang-switch">
            <button class="btn btn-sm" @onclick="SetAr">ع</button>
            <button class="btn btn-sm" @onclick="SetEn">EN</button>
        </div>

    </aside>

    <section class="content">
        <header class="topbar">
            <h1>@Tr("Student.Title")</h1>
        </header>
        <main>
            @Body
        </main>
    </section>
</div>
